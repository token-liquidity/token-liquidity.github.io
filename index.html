<html>
<head>
<link rel="stylesheet" href="./semantic.min.css">
<link rel="stylesheet" href="./components/menu.min.css">
<link rel="stylesheet" href="./components/dropdown.min.css">
<style>
* { border-color:#7ec0ee !important; }	
#main > div.left-container > div > div > table > tr:hover {
  cursor:pointer;	
}	
.etherscan { cursor:pointer }	
#footerModal > p {
  font-weight:bold;	
  margin-bottom:2%;	
}
#rightFooter { float:right; ont-weight:bold; margin-bottom:2%; }
#main > div.left-container > div > div > table > thead > tr > th:hover { cursor:pointer; }
#main > div.left-container > div > div > table > tbody > tr:hover { cursor:pointer; } 	
#main > div.right-container > div > div > table > thead > tr:hover { cursor:pointer; }	
</style>	
</head>
<body>
<div class="ui basic modal one">
  <div class="ui icon header">
    <i class="paper plane icon"></i>
	  This purchase will cost you&nbsp;<span id="ethAmount"></span>&nbsp;ETH
	  <br><span id="buyPrice"></span>&nbsp;ETH</br> 
  </div>
  <div class="content">
    <center>Would you like to submit the transaction?</center>
  </div>
  <div class="actions">
    <div id="cancelTx" class="ui red basic cancel inverted button">
      <i class="remove icon"></i>
      No
    </div>
    <div id="sendBuy" class="ui green ok inverted button">
      <i class="checkmark icon"></i>
      Yes
    </div>
  </div>
</div>
	
<div class="ui basic modal two">
  <div class="ui icon header">
    <i class="paper plane icon"></i>
	  For this sale you will receive&nbsp;<span id="tokenAmount"></span>&nbsp;ETH
	  <br><span id="sellPrice"></span>&nbsp;ETH</br> 
	  <br>After you confirm this sale, you will need to confirm TWO transactions with Metamask. The first transaction is a token transfer approval. As soon as this transaction is confirmed, a second Metamask screen will appear to ask your confirmation of the transaction that actually sells your tokens. You will need to confirm this one as well.</br>
  </div>
  <div class="content">
    <center>Would you like to submit the transaction?</center>
  </div>
  <div class="actions">
    <div id="cancelTx" class="ui red basic cancel inverted button">
      <i class="remove icon"></i>
      No
    </div>
    <div id="sendSell" class="ui green ok inverted button">
      <i class="checkmark icon"></i>
      Yes
    </div>
  </div>
</div>	
		  
<div class="ui one item massive menu" style="margin-top:0;border-top:none;border-left:none;border-right:none;">
    <div class="item">	
      <h1 style="margin:auto;">token-liquidity.github.io</h1>
      <div class="ui negative small message header" style="float:right;margin-right:1%;" id="metamask">
        Metamask Undetected
      </div> 	    	         
    </div> 	    	    	    
</div> 
<div style="width:98%;margin-right:1%;margin-left:1%;margin-bottom:1%;">	
  <div class="ui three item small menu">
    <div class="item">	
      <div class="ui search">
        <div class="ui icon input">
          <input class="prompt" type="text" placeholder="Search Token...">
          <i class="search icon"></i>
        </div>
        <div class="results"> 
        </div>
      </div>
    </div>
    <div class="item">
	    Your Address:&nbsp;<span class="etherscan" id="userAddress"></span>
    </div>
    <div class="item">
	    Your Balance:&nbsp;<span id="userBalance"></span>&nbsp;<span id="userTokenBalance"></span>
    </div>	      
  </div>	
</div>	
<div id="main">	
  <div class="left-container" style="width:12%;float:left;margin-left:1%;margin-right:1%">  		
    <div>
      <div class="ui segment">  
        <table class="ui fixed single line celled table tablesorter">
          <thead>
            <tr>
	      <th>Symbol</th>
              <th>24Hr Volume</th>
            </tr>
          </thead>
	  <tbody>
	  </tbody>	  
        </table> 	
      </div>  	    
    </div>	    
  </div>		
  <div class="right-container" style="width:85%;float:right;margin-right:1%;">  			  
    <div>	  
      <div class="ui segment">
	      <span id="contractCreationDateLiquidity Provid"></span>      
       <table class="ui fixed single line celled table tablesorter">
         <thead>
           <tr><th>Liquidity Providers</th>
             <th>Contract</th>
             <th>24Hr Volume</th>
             <th>Balances</th>
             <th>Commission</th>      
  	     <th>Amount&nbsp;<span id="amountTokenName"></span></th>      
             <th>Trade</th>      
           </tr>
         </thead>
	 <tbody>
         </tbody>	 
       </table>
      </div>
    </div>		    
  </div>	
</div>	
<div class="ui small modal" id="footerModal">
<p>1) Make sure you have equal amounts (in value) of tokens and ETH in your Metamask address
<p>2) Sign into your Metamask and go to: https://etherscan.io/address/token-liquidity.eth
<p>3) Go to the “Write Contract” tab and click on “Connect with Metamask” 
<p>4) Go to line 2 “create_a_new_market” and paste the token contract address into the first field “_traded_token”
<p>5) In the second field “_base_token_seed_amount” type in the amount of ETH you want to put into the contract (if you want to deposit 1 ETH you have to add 18 zeroes after the decimal – so 1000000000000000000). This is just the initial ETH seed amount, start small to test – you can always seed additional ETH and tokens (or withdraw them) in the future.
<p>6) In the third field “_traded_token_seed_amount” type in the amount of tokens you want to put in the contract, making sure that the value of the tokens is roughly equal to the value of the ETH you will seed. Here again you need to find out how many decimals the token contract uses and add that number of zeroes after the decimal (so 400 DICE – because it has 16 decimals – would be 4000000000000000000)
<p>7) In the fourth field “_commission_ratio” enter the commission you want to earn on trades in your Liquidity Contract. If you want 5%, it would be 0.05 then move the decimal 18 places to the right – so 50000000000000000)
<p>8) Now click on “write”, make sure your Metamask trx is including the right gas price and click “Submit”. Now wait for your transaction to confirm then go back to https://etherscan.io/address/token-liquidity.eth and click on “Internal Txns” tab. Now click on “Contract Creation” that you can find on the latest transaction you just created. Now this is your Liquidity Contract. You now have to seed it so that it shows up on the site.
<p>9) Now at your own new contract address click on “Write Contract” and “Connect with Metamask”. Now go to 6. “seed_eth” enter in the ETH amount you decided to stake above (1 ETH would be 1, not in 18 decimal precision) and click “Write”. If you forgot how much ETH you wanted to seed, check “Read Contract” 12.
<p>10) Now you need to go to the contract address of your token and click on “Write Contract” and “Connect with Metamask”. Then under 1.) “approve” enter the contract address for “_spender” or your contract address above then under “_value” enter the token amount you decided to seed above in the correct decimal precision, then press “Write”. If you forgot the amount of tokens you wanted to seed, you can check in your contract under “Read Contract” 11. “traded_token_seed_amount”.
<p>11)Now finally go back to your contract address paragraph 15. “seed_traded_token” on your contract address and click “Write”.
<p>12)On the website https://token-liquidity.github.io/, you will now finally see your contract address under “Contract” (after clicking on the token symbol volume on left). You can click on it to go to Etherscan and adjust your Liquidity Contract in the “Write Contract” tab. Here you can do things like deactivate or activate the contract (to stop trading), add more or withdraw ETH or tokens (be sure to deactivate the contract while changing ETH/token amounts otherwise a user could send in a trx at the wrong time and get the wrong price), adjust the commission rate, etc. Now anyone can trade into your contract at any time.	
</p>		
</div>
<footer style="bottom:20px;position:absolute;width:100%;">
  <div id="footer" style="float:left;width:49%;margin-left:1%;cursor:pointer;">	
  Click here to launch your own liquidity contract (Warning: code experimental, token loss likely!) 
  </div>	
  <div style="float:right;width:49%;text-align:right;margin-right:1%;">
  <a id="discord" style="color:black;cursor:pointer;">If you have questions, join our Discord: https://discord.gg/xfwE7f9</a>	
  </div>	
</footer>	
<script src="https://code.jquery.com/jquery-3.2.0.min.js"></script>
<script src="https://cdn.rawgit.com/MikeMcl/bignumber.js/7269d028/bignumber.min.js"></script>
<script type="text/javascript" src="https://cdn.rawgit.com/christianbach/tablesorter/07e09182/jquery.tablesorter.min.js"></script> 	
<script src="https://cdn.rawgit.com/caolan/async/3741f80b/dist/async.min.js"></script>  
<script src="js/script.js"></script>  
<script src="./semantic.min.js"></script>
<script src="./components/dropdown.min.js"></script>
<script>
$('#discord').on('click', function(){
  window.open("https://discord.gg/xfwE7f9","_blank");      	
});
</script>
<script>
$('#footer').on('click', function() {
  $('.small.modal').modal('show');	
});	
</script>	
<script>
$('.ui.dropdown')
  .dropdown();
</script>
<script>
		setInterval(function() {
			web3.eth.getAccounts(function(err, accounts) {
				if (err) return
				let element = $("#metamask");
				if (accounts[0]) {
 				  let userAddress = accounts[0];					
  				  localStorage.setItem("userAddress", userAddress);					
 	  		          web3.eth.getBalance(userAddress, function(err, balance) {
					let userBalance = (parseInt(balance)/1e18).toFixed(2);  
					element.removeClass("negative");
					element.addClass("success");
					element.text("Metamask Unlocked");
					$('#userAddress').text(userAddress);  
					$('#userBalance').text(userBalance + " ETH");
				  });	  
				} else {
					element.removeClass("success");
					element.addClass("negative");
					element.text("Metamask Locked");
				}
			})
		}, 5000) 
</script> 
</body>
</html>
